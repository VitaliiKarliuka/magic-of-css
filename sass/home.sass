@import compass/css3

@import rainbow

body
    margin: 0

    @media (min-width: 769px)
        margin: 8em 0

.page
    text-align: center
    padding: 20px 0

    @media (min-width: 769px)
        padding: 0

.separator
    height: 40px

    @media (min-width: 769px)
        height: 160px

h2
    font-weight: 100
    text-transform: uppercase
    letter-spacing: .4em
    font-size: 22px
    line-height: 1
    position: relative
    margin: 40px 0
    color: #aaa
    padding: 0 1rem

    span
        margin-right: -.4em

    @media (min-width: 769px)
        margin: 80px 0

.chapter, .potion
    font-weight: 300
    letter-spacing: .01em
    margin-right: -.01em
    font-size: 32px
    line-height: 1
    position: relative
    width: 14em
    max-width: 100%
    text-align: left
    margin: 0 auto
    padding: 0 1rem

    .number
        margin-bottom: 13px
        display: inline-block
        color: #aaa
        margin-right: 20px
        text-align: center
        width: 1em
        font-weight: 100

    a
        color: inherit
        text-decoration: none

        &:hover
            text-decoration: underline

.potion
    text-align: center
    margin-bottom: .5em

// Loading animation

.logo

    .the-magic-of
        +transition(opacity 800ms ease-in-out 1300ms forwards)
        opacity: 0

        .trigger-pageload-animations &
            opacity: 1

    .css-rainbow

        .css-rainbow-c .rainbow
            +transition(transform 800ms ease-in-out 0ms forwards)
            +transform(rotateZ(90deg))
            -webkit-backface-visibility: hidden

            .trigger-pageload-animations &
                +transform(rotateZ(-90deg))

        .css-rainbow-s-1

            .bottom-half .rainbow
                +transition(transform 400ms ease-in 600ms forwards)
                +transform(rotateZ(270deg))
                -webkit-backface-visibility: hidden

                .trigger-pageload-animations &
                    +transform(rotateZ(90deg))

            .top-half .rainbow
                +transition(transform 400ms ease-out 1000ms forwards)
                +transform(rotateZ(90deg))
                -webkit-backface-visibility: hidden

                .trigger-pageload-animations &
                    +transform(rotateZ(270deg))

        .css-rainbow-s-2

            .bottom-half .rainbow
                +transition(transform 400ms ease-in 800ms forwards)
                +transform(rotateZ(270deg))
                -webkit-backface-visibility: hidden

                .trigger-pageload-animations &
                    +transform(rotateZ(90deg))

            .top-half .rainbow
                +transition(transform 400ms ease-out 1200ms forwards)
                +transform(rotateZ(90deg))
                -webkit-backface-visibility: hidden

                .trigger-pageload-animations &
                    +transform(rotateZ(270deg))

.page-inner > *:not(.logo)
    +transition(opacity 800ms ease-in-out 1300ms forwards)
    opacity: 0

    .trigger-pageload-animations &
        opacity: 1

    .window-has-been-scrolled &
        +transition(none)

.trigger-pageload-animations .logo:hover

    .css-rainbow

        .css-rainbow-c .rainbow
            +transition(transform 800ms ease-in-out 1200ms forwards)
            +transform(rotateZ(90deg))

        .css-rainbow-s-1

            .bottom-half .rainbow
                +transition(transform 400ms ease-out 1000ms forwards)
                +transform(rotateZ(270deg))

            .top-half .rainbow
                +transition(transform 400ms ease-in 600ms forwards)
                +transform(rotateZ(90deg))

        .css-rainbow-s-2

            .bottom-half .rainbow
                +transition(transform 400ms ease-out 400ms forwards)
                +transform(rotateZ(270deg))

            .top-half .rainbow
                +transition(transform 400ms ease-in 0ms forwards)
                +transform(rotateZ(90deg))